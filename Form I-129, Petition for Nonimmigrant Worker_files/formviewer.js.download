/*! FormViewer - v1.1.0 | Copyright 2021 IDRsolutions */
!function(){"use strict";var a,b,c,d,e,f,g,h,i={LAYOUT_CONTINUOUS:"continuous",SELECT_SELECT:"select",SELECT_PAN:"pan",ZOOM_SPECIFIC:"specific",ZOOM_ACTUALSIZE:"actualsize",ZOOM_FITWIDTH:"fitwidth",ZOOM_FITHEIGHT:"fitheight",ZOOM_FITPAGE:"fitpage",ZOOM_AUTO:"auto"},j=1,k=0,l=!0,m=[],n=[],o=10,p={},q=!1,r="",s=!1;i.setup=function(p){p||(p=FormViewer.config),q=!0,d=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),e=p.bounds,k=p.pagecount,p.url&&(r=p.url),s=!!p.isR2L,b=z("formviewer"),s&&A.addClass(b,"isR2L"),y.setup();var u=document.createElement("style");u.setAttribute("type","text/css"),document.head.appendChild(u),g=u.sheet,(j<1||j>k)&&(j=1);for(var w=0;w<k;w++)if(e[w][0]!=e[0][0]||e[w][1]!=e[0][1]){l=!1;break}switch(h){case FormViewer.LAYOUT_CONTINUOUS:break;default:h=FormViewer.LAYOUT_CONTINUOUS}var B=[i.LAYOUT_CONTINUOUS];h===FormViewer.LAYOUT_CONTINUOUS&&(c=v),window.addEventListener("resize",function(){y.updateZoom()});var C=document.createElement("div");C.style.position="relative",C.style.display="inline-block",C.style.verticalAlign="middle",C.style.minWidth="100%",C.style.lineHeight="normal";var D=b.childNodes;for(void 0!=D&&D.forEach(function(a){C.appendChild(a)}),b.appendChild(C),f=z("overlay"),x.setup(),a=z("contentContainer"),null==a&&(a=z("mainXFAForm")),a.style.transform="translateZ(0)",a.style.padding=o/2+"px",w=1;w<=k;w++){var E=z("page"+w);E.setAttribute("style","width: "+e[w-1][0]+"px; height: "+e[w-1][1]+"px;"),n[w]=E,m[w]=t(E,w)}c.setup(j),A.addClass(b,"layout-"+c.toString()),y.updateZoomToDefault(),c.goToPage(j);var F={selectMode:x.currentSelectMode,isMobile:d,layout:c.toString(),availableLayouts:B,isFirstPage:1===j,isLastPage:c.isLastPage(j)};for(var G in p)p.hasOwnProperty(G)&&(F[G]=p[G]);F.page=j,i.fire("ready",F)};var t=function(a,b){var c={};return c.isVisible=function(){return!0},c.isLoaded=function(){return!0},c.hide=function(){},c.unload=function(){i.fire("pageunload",{page:b})},c.load=function(){i.fire("pageload",{page:b})},c},u=function(a){j!=a&&(j=a,i.fire("pagechange",{page:j,pagecount:k,isFirstPage:1===j,isLastPage:c.isLastPage(a)}))},v=function(){var a={},c=0,d=0,f=[];a.setup=function(){b.addEventListener("scroll",g);for(var a=0;a<k;a++)e[a][0]>c&&(c=e[a][0]),e[a][1]>d&&(d=e[a][1])},a.unload=function(){b.removeEventListener("scroll",g)};var g=function(){h()},h=function(){var a,b;if(n[1].getBoundingClientRect().top>0)u(1);else for(a=1;a<=k;a++){var c=n[a].getBoundingClientRect();b=c.top;var d=c.bottom-c.top;if(b<=.25*d&&b>.5*-d){u(a);break}}l()},l=function(){f=[j];var a,c,d=b.clientHeight,e=function(a){return c=n[a].getBoundingClientRect(),c.bottom>0&&c.top<d};for(a=j-1;a>=1&&e(a);a--)f.push(a);for(a=j+1;a<=k&&e(a);a++)f.push(a)};return a.goToPage=function(a,c){var d=0;if(c){var f=c.split(" ");switch(f[0]){case"XYZ":d=Number(f[2]);break;case"FitH":d=Number(f[1]);break;case"FitR":d=Number(f[4]);break;case"FitBH":d=Number(f[1])}(isNaN(d)||d<0||d>e[a-1][1])&&(d=0),0!==d&&(d=e[a-1][1]-d)}var g=y.getZoom();b.scrollTop=n[a].offsetTop-o/2+d*g,u(a),l()},a.getVisiblePages=function(){return f},a.updateLayout=function(){},a.isLastPage=function(a){return a===k},a.getZoomBounds=function(){return{width:c,height:d}},a.getAutoZoom=function(c){return a.getZoomBounds().width>b.clientWidth-o?c:1},a.next=function(){i.goToPage(j+1)},a.prev=function(){i.goToPage(j-1)},a.toString=function(){return FormViewer.LAYOUT_CONTINUOUS},a}(),w=function(a){try{a.getSelection?a.getSelection().empty?a.getSelection().empty():a.getSelection().removeAllRanges&&a.getSelection().removeAllRanges():a.document.selection&&a.document.selection.empty()}catch(b){}},x=function(){var a,c,d,e={},g=!1;e.setup=function(){switch(d){case FormViewer.SELECT_PAN:case FormViewer.SELECT_SELECT:break;default:d=FormViewer.SELECT_SELECT}this.currentSelectMode=d,this.currentSelectMode==i.SELECT_SELECT?e.enableTextSelection():e.enablePanning()},e.enableTextSelection=function(){this.currentSelectMode=i.SELECT_SELECT,A.removeClass(f,"panning"),f.removeEventListener("mousedown",h),document.removeEventListener("mouseup",j),f.removeEventListener("mousemove",k)};var h=function(b){return b=b||window.event,A.addClass(f,"mousedown"),a=b.clientX,c=b.clientY,g=!0,!1},j=function(){A.removeClass(f,"mousedown"),g=!1},k=function(d){if(g)return d=d||window.event,b.scrollLeft=b.scrollLeft+a-d.clientX,b.scrollTop=b.scrollTop+c-d.clientY,a=d.clientX,c=d.clientY,!1};return e.enablePanning=function(){this.currentSelectMode=i.SELECT_PAN,w(window),A.addClass(f,"panning"),f.addEventListener("mousedown",h),document.addEventListener("mouseup",j),f.addEventListener("mousemove",k)},e.setDefaultMode=function(a){d=a},e}();i.setSelectMode=function(a){if(q){if(d)return;a==i.SELECT_SELECT?x.enableTextSelection():x.enablePanning(),i.fire("selectchange",{type:a})}else x.setDefaultMode(a)};var y=function(){var a,d,f,g=i.ZOOM_AUTO,h=[.25,.5,.75,1,1.25,1.5,2,2.5,3,3.5,4],j=[i.ZOOM_AUTO,i.ZOOM_FITPAGE,i.ZOOM_FITHEIGHT,i.ZOOM_FITWIDTH,i.ZOOM_ACTUALSIZE],l=0,p=1,q=function(){var a=document.createElement("style");a.setAttribute("type","text/css"),document.head.appendChild(a),d=a.sheet},r=function(a,b,c,d,e){var f;return f=e?"translate3d("+b+"px, "+c+"px, 0) scale("+d+")":"translateX("+b+"px) translateY("+c+"px) scale("+d+")","-webkit-transform: "+f+";\n-ms-transform: "+f+";\ntransform: "+f+";"},s=function(f){p=v(f);var h=!1,j=!1;p>=4?(p=4,j=!0):p<=.25&&(p=.25,h=!0);var o=b.scrollTop/b.scrollHeight;c.updateLayout();for(var q=c.getVisiblePages(),t=1;t<=k;t++)q.indexOf(t)===-1&&m[t].hide();a&&d.deleteRule(a);var u=r(null,0,0,p,!1);a=d.insertRule(".page-inner { \n"+u+"\n}",d.cssRules.length);for(var w=0;w<k;w++)n[w+1].style.width=Math.floor(e[w][0]*p)+"px",n[w+1].style.height=Math.floor(e[w][1]*p)+"px";b.scrollTop=b.scrollHeight*o,l++,l%2===1&&s(),i.fire("zoomchange",{zoomType:g,zoomValue:p,isMinZoom:h,isMaxZoom:j})},t=function(){for(var a=p,b=h[h.length-1],c=0;c<h.length;c++)if(h[c]>a){b=h[c];break}var d;for(c=0;c<j.length;c++){var e=v(j[c]);if(e>a&&e<=b){if(d&&e===b)continue;d=j[c],b=e}}return d||b},u=function(){for(var a=p,b=h[0],c=h.length-1;c>=0;c--)if(h[c]<a){b=h[c];break}var d;for(c=0;c<j.length;c++){var e=v(j[c]);if(e<a&&e>=b){if(d&&e===b)continue;d=j[c],b=e}}return d||b},v=function(a){var d=c.getZoomBounds(),e=(b.clientWidth-o)/d.width,f=(b.clientHeight-o)/d.height,h=parseFloat(a);switch(isNaN(h)||(p=h,a=i.ZOOM_SPECIFIC),a||(a=g),a){case i.ZOOM_AUTO:p=c.getAutoZoom(e,f);break;case i.ZOOM_FITWIDTH:p=e;break;case i.ZOOM_FITHEIGHT:p=f;break;case i.ZOOM_FITPAGE:p=Math.min(e,f);break;case i.ZOOM_ACTUALSIZE:p=1}return g=a,p};return{setup:q,updateZoom:s,updateZoomToDefault:function(){s(f)},zoomIn:function(){s(t())},zoomOut:function(){s(u())},getZoom:function(){return p},setDefault:function(a){f=a}}}();i.zoomIn=function(){y.zoomIn()},i.zoomOut=function(){y.zoomOut()},i.setZoom=function(a){q?y.updateZoom(a):y.setDefault(a)},i.goToPage=function(a,b){q?a>=1&&a<=k&&c.goToPage(Number(a),b):j=a},i.next=function(){c.next()},i.prev=function(){c.prev()},i.setLayout=function(a){q?(c.unload(),A.removeClass(b,"layout-"+c.toString()),c=v,c.setup(j),A.addClass(b,"layout-"+c.toString()),y.updateZoom(FormViewer.ZOOM_AUTO),c.goToPage(j),i.fire("layoutchange",{layout:a})):h=a},i.updateLayout=function(){y.updateZoom()};var z=function(a){return document.getElementById(a)};i.on=function(a,b){p[a]||(p[a]=[]),p[a].indexOf(b)===-1&&p[a].push(b)},i.off=function(a,b){if(p[a]){var c=p[a].indexOf(b);c!==-1&&p[a].splice(c,1)}},i.fire=function(a,b){p[a]&&p[a].forEach(function(a){a(b)})};var A=function(){return{addClass:function(a,b){var c=0!==a.className.length?a.className.split(" "):[],d=c.indexOf(b);d===-1&&(c.push(b),a.className=c.join(" "))},removeClass:function(){for(var a=arguments[0],b=0!==a.className.length?a.className.split(" "):[],c=1;c<arguments.length;c++){var d=b.indexOf(arguments[c]);d!==-1&&b.splice(d,1)}a.className=b.join(" ")}}}();i.handleFormSubmission=function(a,b){FormVuAPI&&(a?B(a,b):(a=window.prompt("Please enter the URL to submit to"),a?B(a,b):console.log("No URL provided for FormSubmission")))};var B=function(a,b){if(FormVuAPI){var c={url:a,success:function(){alert("Form submitted successfully")},failure:function(){alert("Form failed to submit, please try again")}},d="string"==typeof b?b.toLowerCase():"";switch(d){case"json":"function"==typeof FormVuAPI.submitFormAsJSON&&FormVuAPI.submitFormAsJSON(c);break;case"formdata":default:"function"==typeof FormVuAPI.submitFormAsFormData&&FormVuAPI.submitFormAsFormData(c)}}};"function"==typeof define&&define.amd?define(["formviewer"],[],function(){return i}):"object"==typeof module&&module.exports?module.exports=i:window.FormViewer=i}();